<% @title = 'Cast Manager' %>
<h2>Cast Manager</h2>
<p>Summary: <%= @summary %> cast members.</p>
<p><a id="ShowHide">Show Inactive</a></p>

<table class="castTable">
  <tr>
    <th></th>
    <th>Name</th>
    <th>Date of Birth</th>
    <th>Height</th>
    <th>Hair Colour</th>
    <th>Eye Colour</th>
    <th>Gender</th>
    <th>Last Viewed</th>
    <th>View Count</th>
    <th></th>
  </tr>

<% @people.each do |p| %>
  <tr class="<%= if p.status == 'Active' then 'castShow' else 'castHide' end %>">
    <td><%= image_tag p.thumbnail_url, size: '52x60' %></td>
    <td><%= link_to p.full_name, edit_person_path(p) %></td>
    <td><%= p.date_of_birth.strftime("%d-%b-%Y") if p.date_of_birth %></td>
    <td><%= p.height_feet %>'&nbsp;<%= p.height_inches %>"</td>
    <td><%= p.hair_colour %></td>
    <td><%= p.eye_colour %></td>
    <td><%= p.gender %></td>
    <td><%= p.last_viewed_at.strftime("%d-%b-%Y") if p.last_viewed_at %></td>
    <td><%= p.view_count %></td>
    <% if p.status == 'Active' %>
      <td><%= link_to 'Deactivate', deactivate_person_path(p), data: {confirm: 'Are you sure?'},
                       method: :post %></td>
    <% else %>
      <td><%= link_to 'Activate', activate_person_path(p), data: {confirm: 'Are you sure?'},
                       method: :post %></td>
    <% end %>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Person', new_person_path %>
